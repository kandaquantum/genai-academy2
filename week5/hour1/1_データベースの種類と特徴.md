# データベースの種類と特徴


<a id="introduction"></a>
## はじめに

本講義では、データベースの主な種類とその特徴について学習します。リレーショナルデータベース、NoSQLデータベース、ベクトルデータベース、コンテキストウィンドウベースデータベースの違いを理解し、用途に応じたデータベースの選択方法を学びます。


各データベースの基本的な特徴や利用シーンを学ぶことで、適切なデータベースを選択し、効果的に活用する方法を身につけることができます。特に、ベクトルデータベースやコンテキストウィンドウベースデータベースは、大規模言語モデル（LLM）の発展に伴って注目されている新しい技術であり、従来のデータベースとは異なる柔軟で知的なデータ処理を実現できる可能性を秘めています。本講義では、これらの最新技術についても触れ、データベースの未来像について考察します。


<a id="memory-systems"></a>
## ITシステムとAIシステムにおける記憶のしくみ

ITシステムにおける記憶のしくみは、短期記憶、長期記憶、外付け記憶の3つに大別されます。それぞれの特徴を以下の表にまとめました。

![aaa](./rag.png)

| 記憶の種類 | 従来型ITシステムの例 | 次世代型AIシステムの例 | 図書館での大学の課題を解く例 |
| --- | --- | --- | --- |
| 短期記憶 | - CPU内のレジスタ<br>- メインメモリ(RAM) | - LLMのコンテキストウィンドウ | - 図書館の机の上に広げた資料や本 |
| 長期記憶 | - ハードディスク(HDD)<br>- ソリッドステートドライブ(SSD) | - ファインチューニングされたモデル | - 自分自身の頭の中にある知識や記憶 |
| 外付け記憶 | - USBメモリ<br>- 外付けHDD/SSD<br>- クラウドストレージ<br>- リレーショナルデータベース(RDB)<br>- NoSQLデータベース | - ベクトルデータベース<br>- リレーショナルデータベース(RDB)<br>- NoSQLデータベース | - 図書館の本棚にある本や資料 |




<a id="comparison"></a>
## リレーショナルデータベース、NoSQLデータベース、ベクトルデータベース、コンテキストウィンドウベースデータベースの比較

リレーショナルデータベース、NoSQLデータベース、ベクトルデータベース、そしてコンテキストウィンドウベースデータベースの間には、以下のような違いがあります。

| 項目 | リレーショナルデータベース | NoSQLデータベース | ベクトルデータベース | *コンテキストウィンドウベースデータベース |
| --- | --- | --- | --- | --- |
| データモデル | 行と列で構成されるテーブル | 柔軟なデータ構造(ドキュメント、グラフ、キーバリューなど) | 高次元ベクトルデータ | 自然言語で記述されたデータ |
| 問い合わせ言語 | SQL | 独自の問い合わせ言語 | 特定のベクトル検索言語 | 自然言語による問い合わせ |
| 強い整合性 | 〇 | △ | △ | △ |
| 水平スケーラビリティ | △ | 〇 | 〇 | 〇 |
| 厳密性 | 〇 | ○ | △ | △ |
| 用途 | 会計、在庫管理など構造化データ管理 | Webアプリ、IoT、ビッグデータ解析など | 画像検索、推薦システム、自然言語処理 | 知識ベース、自然言語インターフェース、データ要約・生成 |

この比較表から、用途に応じてリレーショナルデータベース、NoSQLデータベース、ベクトルデータベース、コンテキストウィンドウベースデータベースを使い分けることが重要であることがわかります。特に、コンテキストウィンドウベースデータベースは、大規模言語モデル（LLM）の発展に伴って注目されている新しい技術であり、従来のデータベースとは異なる柔軟で知的なデータ処理を実現できる可能性を秘めています。ただし、この技術はまだ研究段階にあるため、実用化にはさらなる発展が必要です。


<a id="json-example"></a>
## JSONデータの例

以下は、ユーザー情報を表すJSONデータの例です。

```json
[
  {
    "id": 1,
    "name": "山田太郎",
    "email": "yamada@example.com",
    "age": 30,
    "address": {
      "zipcode": "123-4567",
      "prefecture": "東京都",
      "city": "新宿区",
      "street": "西新宿1-1-1"
    },
    "hobbies": [
      "読書",
      "旅行",
      "料理"
    ]
  },
  {
    "id": 2,
    "name": "鈴木花子",
    "email": "suzuki@example.com",
    "age": 25,
    "address": {
      "zipcode": "987-6543",
      "prefecture": "大阪府",
      "city": "大阪市",
      "street": "北区梅田2-2-2"
    },
    "hobbies": [
      "映画鑑賞",
      "ヨガ",
      "ガーデニング"
    ]
  }
]
```
このJSONデータは、id、name、email、age、address、hobbiesの各フィールドを持つユーザーオブジェクトの配列です。addressフィールドはzipcode、prefecture、city、streetの各フィールドを持つオブジェクトで、hobbiesフィールドは文字列の配列になっています。

JSONは、構造化データを表現するのに適したデータ形式で、NoSQLデータベースやWeb APIとの連携でよく使われます。JSONデータは人間にとって読みやすく、プログラムでも扱いやすいという特徴があります。




参考: https://x.com/ai_syacho/status/1781664937141789082



<a id="relational-databases"></a>
## リレーショナルデータベース

リレーショナルデータベースは、データを表形式で管理するデータベースの一種です。代表的なリレーショナルデータベースにはMySQLやPostgreSQLがあります。これらのデータベースは、SQLという共通の問い合わせ言語を使って、データの追加、削除、検索などの操作を行うことができます。リレーショナルデータベースの特徴は、データの整合性が高く、複雑な検索や集計が得意なことです。そのため、会計システムや在庫管理システムなど、構造化されたデータの管理に適しています。

<a id="nosql-databases"></a>
## NoSQLデータベース

一方、近年注目されているのがNoSQLデータベースです。NoSQLデータベースは、リレーショナルデータベースとは異なり、柔軟なデータ構造を持ちます。MongoDB やRedisなどがその代表例です。NoSQLデータベースは、大量のデータを高速に処理することができ、Web アプリケーションやIoTデバイスなどのユースケースに適しています。また、データの形式にとらわれずに、様々な形式のデータを格納することができます。ただし、リレーショナルデータベースのような複雑な集計や JOIN 処理は得意ではありません。


<a id="vector-databases"></a>
## ベクトルデータベース

ベクトルデータベースは、高次元のベクトルデータを効率的に処理するために設計されたデータベースです。これは、特に機械学習モデルやディープラーニングモデルが生成する大量のベクトルデータを扱う際に有効です。

### 特徴
- **高速な検索性能**: 大規模なベクトルデータセットに対して、似ているアイテムを迅速に検索できます。
- **スケーラビリティ**: データ量が増加しても、検索速度が低下しにくい設計がなされています。
- **柔軟性**: 異なる種類のデータソースからのベクトルデータを統合し、一元管理することが可能です。

### 用途
- **画像検索**: 画像から抽出された特徴ベクトルを用いて、類似画像を検索します。
- **推薦システム**: ユーザーや商品の特徴をベクトル化し、類似のユーザーや商品を推薦します。
- **自然言語処理**: 文書や単語のベクトル表現を用いて、テキストの類似性を評価します。

ベクトルデータベースは、これらの特性を活かして、多様なアプリケーションでの利用が進んでいます。特に、AI技術と組み合わせることで、その可能性はさらに広がっています。



<a id="context-window-based-databases"></a>
## コンテキストウィンドウベースデータベース

近年、大規模言語モデル（LLM）の発展に伴い、LLMのコンテキストウィンドウを利用して仮想的なデータベースを構築する手法が注目されています。この手法は、コンテキストウィンドウベースデータベース（Context Window-based Database）と本講義では定義します。

LLMのトークン数が200k〜1Mまで飛躍的に増大したことにより、LLMのコンテキストウィンドウ内に大量の情報を格納できるようになりました。これにより、LLMのコンテキストウィンドウを仮想的なデータベースとして活用することが可能になったのです。

コンテキストウィンドウベースデータベースでは、自然言語で記述されたデータをLLMのコンテキストウィンドウ内に格納し、LLMの推論能力を利用してデータの検索や抽出を行います。これにより、従来のデータベースとは異なる柔軟で知的なデータ処理が実現できると期待されています。

### 特徴
- **LLMのコンテキストウィンドウを活用**: LLMのコンテキストウィンドウを仮想的にデータベースのように扱うことができます。
- **柔軟なデータ表現**: 自然言語で記述されたデータを直接扱うことができ、構造化されていないデータにも対応できます。
- **即時の情報検索**: LLMの高速な推論能力を活かして、データの検索や抽出を素早く行うことができます。

### 用途
- **知識ベースの構築**: LLMが持つ膨大な知識を、特定のドメインに特化した知識ベースとして活用できます。
- **自然言語インターフェース**: ユーザーが自然言語で質問をすると、LLMがデータベースから適切な回答を生成します。
- **データの要約と生成**: LLMを使って、大量のテキストデータから重要な情報を抽出したり、新しいテキストを生成したりできます。

コンテキストウィンドウベースデータベースは、従来のデータベースとは異なるアプローチでデータを管理・活用するための新しい技術です。LLMの能力を活かすことで、より柔軟で知的なデータ処理が可能になると期待されています。ただし、この技術はまだ研究段階にあり、実用化にはさらなる発展が必要です。





<a id="examples"></a>
## 主なデータベースの特徴

ここでは、代表的なリレーショナルデータベースとNoSQLデータベースの特徴を解説します。

### MySQL
- オープンソースのリレーショナルデータベース
- 小規模から大規模なWebサイトまで幅広く利用されている
- 高速性、信頼性、管理しやすさが特徴

### PostgreSQL 
- オープンソースのリレーショナルデータベース
- MySQLよりも機能が豊富で、データ型の拡張性が高い
- 複雑なクエリ処理や高度な分析に適している

### MongoDB
- ドキュメント指向のNoSQLデータベース

### Redis
- メモリ上で動作するKey-Valueストア型のNoSQLデータベース
